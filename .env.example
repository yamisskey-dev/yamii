# ===========================================================
# Yamii 人生相談AIサーバー 環境変数設定
# ===========================================================
# このファイルを .env にコピーして設定してください
# cp .env.example .env
# ===========================================================

# ===========================================================
# 基本設定
# ===========================================================

# データ保存ディレクトリ
YAMII_DATA_DIR=data

# デバッグモード (true/false)
YAMII_DEBUG=false

# ログレベル (DEBUG, INFO, WARNING, ERROR)
YAMII_LOG_LEVEL=INFO

# ===========================================================
# AI プロバイダー設定
# ===========================================================

# OpenAI API設定（メインプロバイダー）
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxx
OPENAI_MODEL=gpt-4.1

# Gemini API設定（フォールバック用）
GEMINI_API_KEY=your_gemini_api_key_here

# ===========================================================
# セキュリティ設定
# ===========================================================

# E2EE 暗号化 (true/false)
# 有効にするとユーザーデータがユーザー固有キーで暗号化されます
YAMII_ENCRYPTION_ENABLED=true

# マスター暗号化キー（Base64エンコード、32バイト）
# 未設定の場合は自動生成されます
# 生成コマンド: python -c "import nacl.utils; import base64; print(base64.b64encode(nacl.utils.random(32)).decode())"
# YAMII_MASTER_KEY=

# E2EEキー保存ディレクトリ
YAMII_KEY_STORAGE_PATH=.yamii_keys

# ===========================================================
# API 認証設定
# ===========================================================

# API キー（カンマ区切りで複数指定可能）
# 未設定の場合は認証なしで動作（開発モード）
# 本番環境では必ず設定してください
# 生成コマンド: python -c "import secrets; print(f'yamii_{secrets.token_urlsafe(32)}')"
YAMII_API_KEYS=yamii_your_api_key_1,yamii_your_api_key_2

# API キーヘッダー名（デフォルト: X-API-Key）
YAMII_API_KEY_HEADER=X-API-Key

# ===========================================================
# レート制限設定
# ===========================================================

# レート制限の有効/無効 (true/false)
YAMII_RATE_LIMIT_ENABLED=true

# 時間ウィンドウあたりの最大リクエスト数
YAMII_RATE_LIMIT_REQUESTS=100

# 時間ウィンドウ（秒）
YAMII_RATE_LIMIT_WINDOW=60

# ===========================================================
# API サーバー設定
# ===========================================================

# APIサーバーホスト
API_HOST=0.0.0.0

# APIサーバーポート
API_PORT=8000

# ===========================================================
# データベース設定（PostgreSQL）
# ===========================================================

DB_HOST=localhost
DB_PORT=5432
DB_NAME=yamii
DB_USER=yamii_user
DB_PASSWORD=your_secure_password_here

# 接続プール設定
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_ECHO=false

# ===========================================================
# Misskey Bot 設定
# ===========================================================

# Misskey Bot を有効にするか
ENABLE_MISSKEY_BOT=false

# Misskey インスタンス URL（末尾スラッシュなし）
MISSKEY_INSTANCE_URL=https://your-misskey-instance.com

# Misskey アクセストークン
# 必要な権限: read:account, write:notes, read:notifications, write:notifications
# read:messaging, write:messaging（チャット機能を使う場合）
MISSKEY_ACCESS_TOKEN=your_misskey_access_token_here

# Bot ユーザー ID
# Misskey の設定 > API で確認できます
MISSKEY_BOT_USER_ID=your_bot_user_id

# ストリーム再接続設定
MISSKEY_STREAM_RECONNECT_DELAY=5
MISSKEY_MAX_RECONNECT_ATTEMPTS=10

# ===========================================================
# Bot 共通設定
# ===========================================================

# Bot 名前
BOT_NAME=yamii

# Bot ユーザー名
BOT_USERNAME=yamii

# セッションタイムアウト（秒）
BOT_SESSION_TIMEOUT=3600

# 機能有効/無効
BOT_ENABLE_DM=true
BOT_ENABLE_MENTIONS=true
BOT_ENABLE_TIMELINE=false
BOT_ENABLE_GLOBAL_TIMELINE=false

# 危機対応ホットライン（カンマ区切り）
BOT_CRISIS_HOTLINES=いのちの電話: 0570-783-556, こころの健康相談統一ダイヤル: 0570-064-556

# ===========================================================
# 内部API接続（Bot → API）
# ===========================================================

# API エンドポイント（Bot から API への接続）
YAMII_API_URL=http://localhost:8000

# API タイムアウト（秒）
YAMII_API_TIMEOUT=30

# Bot が使用する API キー（YAMII_API_KEYS の中の1つ）
YAMII_BOT_API_KEY=yamii_your_api_key_1
